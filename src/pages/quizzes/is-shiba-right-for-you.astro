---
import Layout from '../../layouts/Layout.astro';

const quizSchema = {
  "@context": "https://schema.org",
  "@type": "Quiz",
  "name": "Is a Shiba Inu Right for You?",
  "description": "A comprehensive quiz to help you determine if a Shiba Inu dog breed matches your lifestyle, living situation, and personality.",
  "educationalLevel": "beginner",
  "about": {
    "@type": "Thing",
    "name": "Shiba Inu",
    "description": "Japanese dog breed"
  }
};
---

<Layout
  title="Is a Shiba Inu Right for You? | Free Quiz | Yukki's Corner"
  description="Take our free quiz to find out if a Shiba Inu is the right dog breed for you. Answer 10 questions about your lifestyle, experience, and living situation."
>
  <script slot="head" type="application/ld+json" set:html={JSON.stringify(quizSchema)} />

  <div class="section">
    <div class="container">
      <div class="quiz-container">
        <!-- Quiz Header -->
        <div class="quiz-header">
          <nav class="breadcrumb">
            <a href="/">Home</a>
            <span class="separator">&rarr;</span>
            <a href="/quizzes">Quizzes</a>
            <span class="separator">&rarr;</span>
            <span>Is a Shiba Inu Right for You?</span>
          </nav>
          <h1>Is a Shiba Inu Right for You?</h1>
          <p class="quiz-intro">Answer these 10 questions honestly to find out if a Shiba Inu matches your lifestyle. This quiz takes about 5 minutes.</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
          <div class="progress-bar" id="progressBar"></div>
          <span class="progress-text" id="progressText">Question 1 of 10</span>
        </div>

        <!-- Quiz Questions -->
        <div class="quiz-content" id="quizContent">
          <!-- Questions will be rendered by JavaScript -->
        </div>

        <!-- Quiz Results (hidden initially) -->
        <div class="quiz-results" id="quizResults" style="display: none;">
          <!-- Results will be rendered by JavaScript -->
        </div>
      </div>
    </div>
  </div>

  <script>
    const questions = [
      {
        id: 1,
        question: "How would you describe your living situation?",
        options: [
          { text: "House with a securely fenced yard", score: 3 },
          { text: "Apartment with nearby parks", score: 2 },
          { text: "Small apartment, limited outdoor access", score: 1 },
          { text: "I move frequently / unstable housing", score: 0 }
        ]
      },
      {
        id: 2,
        question: "How much time can you dedicate to daily exercise and walks?",
        options: [
          { text: "1-2 hours daily, I'm very active", score: 3 },
          { text: "30-60 minutes daily", score: 2 },
          { text: "15-30 minutes, I have a busy schedule", score: 1 },
          { text: "Very little, I prefer a low-energy pet", score: 0 }
        ]
      },
      {
        id: 3,
        question: "What's your experience with dogs?",
        options: [
          { text: "Experienced with independent/stubborn breeds", score: 3 },
          { text: "I've owned dogs before, but eager breeds", score: 2 },
          { text: "First-time dog owner, but I've researched a lot", score: 1 },
          { text: "No experience, want an easy first dog", score: 0 }
        ]
      },
      {
        id: 4,
        question: "How do you feel about a dog that doesn't always obey commands?",
        options: [
          { text: "I find independence charming and can work with it", score: 3 },
          { text: "I'd be patient but prefer some obedience", score: 2 },
          { text: "I'd find it frustrating but manageable", score: 1 },
          { text: "I need a dog that listens and obeys", score: 0 }
        ]
      },
      {
        id: 5,
        question: "How do you feel about dog hair and grooming?",
        options: [
          { text: "I don't mind heavy shedding, happy to brush regularly", score: 3 },
          { text: "Moderate shedding is okay", score: 2 },
          { text: "I prefer minimal shedding", score: 1 },
          { text: "I can't handle shedding at all", score: 0 }
        ]
      },
      {
        id: 6,
        question: "Do you have other pets at home?",
        options: [
          { text: "No other pets", score: 3 },
          { text: "A calm, dog-friendly pet", score: 2 },
          { text: "Small animals (cats, rabbits, etc.)", score: 1 },
          { text: "Multiple pets including small animals", score: 0 }
        ]
      },
      {
        id: 7,
        question: "What's your household like?",
        options: [
          { text: "Adults only, calm environment", score: 3 },
          { text: "Adults with older children (10+)", score: 2 },
          { text: "Young children in the home", score: 1 },
          { text: "Very chaotic, lots of visitors", score: 0 }
        ]
      },
      {
        id: 8,
        question: "How important is off-leash reliability to you?",
        options: [
          { text: "Not important, I'll always use a leash outdoors", score: 3 },
          { text: "Would be nice but not essential", score: 2 },
          { text: "Somewhat important to me", score: 1 },
          { text: "Very important, I want off-leash freedom", score: 0 }
        ]
      },
      {
        id: 9,
        question: "How do you handle a pet that's sometimes aloof or cat-like?",
        options: [
          { text: "I love that! Independence is appealing", score: 3 },
          { text: "I can appreciate it with some cuddly moments", score: 2 },
          { text: "I'd prefer more affection", score: 1 },
          { text: "I want a dog that's always eager to please", score: 0 }
        ]
      },
      {
        id: 10,
        question: "Are you prepared for potential health costs and a 12-16 year commitment?",
        options: [
          { text: "Yes, I have savings and am fully committed", score: 3 },
          { text: "I have pet insurance planned and am committed", score: 2 },
          { text: "I'm committed but finances are tight", score: 1 },
          { text: "I haven't thought much about long-term costs", score: 0 }
        ]
      }
    ];

    const results = {
      excellent: {
        title: "Perfect Match! üéâ",
        emoji: "üêï",
        description: "Congratulations! Based on your answers, a Shiba Inu could be an excellent match for you. You have the right living situation, realistic expectations, and the patience needed for this independent breed.",
        tips: [
          "Find a reputable breeder or consider Shiba Inu rescue organizations",
          "Start researching training methods that work with stubborn breeds",
          "Prepare your home with secure fencing and puppy-proofing",
          "Budget for quality food, grooming supplies, and vet care"
        ],
        color: "#22c55e"
      },
      good: {
        title: "Good Potential Match! üëç",
        emoji: "ü§î",
        description: "You have many qualities that would make you a good Shiba Inu owner, but there are a few areas to consider. With some preparation and adjustment, you could be a great fit.",
        tips: [
          "Research Shiba Inu temperament more thoroughly",
          "Consider meeting Shiba Inus in person before committing",
          "Prepare for the challenges highlighted in your lower-scoring answers",
          "Connect with Shiba Inu owners to learn from their experiences"
        ],
        color: "#eab308"
      },
      maybe: {
        title: "Consider Carefully ü§∑",
        emoji: "‚ö†Ô∏è",
        description: "While you might still enjoy a Shiba Inu, your current lifestyle or expectations may present some challenges. It's important to honestly assess if this breed is right for you right now.",
        tips: [
          "Spend time with Shiba Inus before making a decision",
          "Consider if your lifestyle might change to better suit the breed",
          "Research other breeds that might be a better fit",
          "Talk to experienced Shiba owners about the realities of ownership"
        ],
        color: "#f97316"
      },
      notRecommended: {
        title: "Maybe Not Right Now üí≠",
        emoji: "üö´",
        description: "Based on your answers, a Shiba Inu might not be the best match for your current situation. This isn't a judgment‚Äîit's about finding the right fit for both you and the dog.",
        tips: [
          "Consider breeds that better match your lifestyle",
          "Your situation may change in the future",
          "Research breeds that are better for first-time owners",
          "Consider fostering dogs to gain experience first"
        ],
        color: "#ef4444"
      }
    };

    let currentQuestion = 0;
    let answers: number[] = [];

    function renderQuestion() {
      const question = questions[currentQuestion];
      const quizContent = document.getElementById('quizContent');
      const progressBar = document.getElementById('progressBar');
      const progressText = document.getElementById('progressText');

      if (progressBar) {
        progressBar.style.width = `${((currentQuestion) / questions.length) * 100}%`;
      }
      if (progressText) {
        progressText.textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
      }

      if (quizContent) {
        quizContent.innerHTML = `
          <div class="question-card">
            <h2 class="question-number">Question ${question.id}</h2>
            <p class="question-text">${question.question}</p>
            <div class="options-container">
              ${question.options.map((option, index) => `
                <button class="option-btn" data-score="${option.score}" data-index="${index}">
                  ${option.text}
                </button>
              `).join('')}
            </div>
          </div>
        `;

        // Add event listeners to options
        document.querySelectorAll('.option-btn').forEach(btn => {
          btn.addEventListener('click', handleAnswer);
        });
      }
    }

    function handleAnswer(e: Event) {
      const target = e.target as HTMLElement;
      const score = parseInt(target.dataset.score || '0');
      answers.push(score);

      // Highlight selected option
      document.querySelectorAll('.option-btn').forEach(btn => {
        btn.classList.remove('selected');
      });
      target.classList.add('selected');

      // Move to next question after a brief delay
      setTimeout(() => {
        if (currentQuestion < questions.length - 1) {
          currentQuestion++;
          renderQuestion();
        } else {
          showResults();
        }
      }, 300);
    }

    function showResults() {
      const totalScore = answers.reduce((sum, score) => sum + score, 0);
      const maxScore = questions.length * 3;
      const percentage = (totalScore / maxScore) * 100;

      let result;
      if (percentage >= 80) {
        result = results.excellent;
      } else if (percentage >= 60) {
        result = results.good;
      } else if (percentage >= 40) {
        result = results.maybe;
      } else {
        result = results.notRecommended;
      }

      const quizContent = document.getElementById('quizContent');
      const quizResults = document.getElementById('quizResults');
      const progressBar = document.getElementById('progressBar');

      if (quizContent) quizContent.style.display = 'none';
      if (progressBar) progressBar.style.width = '100%';

      if (quizResults) {
        quizResults.style.display = 'block';
        quizResults.innerHTML = `
          <div class="results-card">
            <div class="results-emoji">${result.emoji}</div>
            <h2 class="results-title" style="color: ${result.color}">${result.title}</h2>
            <div class="score-display">
              <div class="score-circle" style="border-color: ${result.color}">
                <span class="score-number">${totalScore}</span>
                <span class="score-max">/ ${maxScore}</span>
              </div>
            </div>
            <p class="results-description">${result.description}</p>
            <div class="results-tips">
              <h3>Next Steps:</h3>
              <ul>
                ${result.tips.map(tip => `<li>${tip}</li>`).join('')}
              </ul>
            </div>
            <div class="results-actions">
              <button class="btn" id="retakeBtn">Retake Quiz</button>
              <a href="/tips" class="btn btn-secondary">Explore Shiba Tips</a>
            </div>
            <div class="share-section">
              <p>Share your result:</p>
              <div class="share-buttons">
                <button class="share-btn" id="copyResultBtn" title="Copy link">üìã Copy Link</button>
              </div>
            </div>
          </div>
        `;

        document.getElementById('retakeBtn')?.addEventListener('click', () => {
          currentQuestion = 0;
          answers = [];
          if (quizResults) quizResults.style.display = 'none';
          if (quizContent) quizContent.style.display = 'block';
          renderQuestion();
        });

        document.getElementById('copyResultBtn')?.addEventListener('click', () => {
          navigator.clipboard.writeText(window.location.href);
          const btn = document.getElementById('copyResultBtn');
          if (btn) {
            btn.textContent = '‚úì Copied!';
            setTimeout(() => {
              btn.textContent = 'üìã Copy Link';
            }, 2000);
          }
        });
      }
    }

    // Initialize quiz
    renderQuestion();
  </script>

  <style is:global>
    .quiz-container {
      max-width: 700px;
      margin: 0 auto;
    }

    .breadcrumb {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      margin-bottom: var(--space-lg);
      font-size: var(--font-size-sm);
      color: var(--color-text-light);
    }

    .breadcrumb a {
      color: var(--color-primary);
      transition: color var(--transition-fast);
    }

    .breadcrumb a:hover {
      color: var(--color-primary-dark);
    }

    .quiz-header {
      text-align: center;
      margin-bottom: var(--space-2xl);
    }

    .quiz-header h1 {
      color: var(--color-primary);
      font-size: var(--font-size-3xl);
      margin-bottom: var(--space-md);
    }

    .quiz-intro {
      color: var(--color-text-light);
      font-size: var(--font-size-lg);
      line-height: 1.6;
    }

    .progress-container {
      background-color: var(--color-secondary);
      border-radius: var(--radius-full);
      height: 12px;
      margin-bottom: var(--space-sm);
      overflow: hidden;
      position: relative;
    }

    .progress-bar {
      background: linear-gradient(90deg, var(--color-primary), var(--color-primary-dark));
      height: 100%;
      width: 0%;
      transition: width var(--transition-base);
      border-radius: var(--radius-full);
    }

    .progress-text {
      display: block;
      text-align: center;
      font-size: var(--font-size-sm);
      color: var(--color-text-light);
      margin-bottom: var(--space-xl);
    }

    .question-card {
      background: var(--color-white);
      border-radius: var(--radius-xl);
      padding: var(--space-3xl);
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
    }

    .question-number {
      color: var(--color-primary);
      font-size: var(--font-size-xs);
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: var(--space-sm);
      font-weight: 600;
    }

    .question-text {
      font-size: var(--font-size-2xl);
      color: var(--color-text);
      margin-bottom: var(--space-2xl);
      line-height: 1.4;
      font-weight: 600;
    }

    .options-container {
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
    }

    .option-btn {
      width: 100%;
      padding: var(--space-lg) var(--space-xl);
      background-color: var(--color-white);
      border: 2px solid #e5e7eb;
      border-radius: var(--radius-lg);
      font-size: var(--font-size-base);
      color: var(--color-text);
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: left;
      line-height: 1.5;
      position: relative;
      display: flex;
      align-items: center;
      gap: var(--space-md);
    }

    .option-btn::before {
      content: '';
      width: 22px;
      height: 22px;
      min-width: 22px;
      border: 2px solid #d1d5db;
      border-radius: 50%;
      transition: all 0.2s ease;
      background-color: var(--color-white);
    }

    .option-btn:hover {
      border-color: var(--color-primary);
      background-color: #fff8f5;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .option-btn:hover::before {
      border-color: var(--color-primary);
    }

    .option-btn.selected {
      border-color: var(--color-primary);
      background-color: var(--color-primary);
      color: var(--color-white);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(232, 119, 68, 0.3);
    }

    .option-btn.selected::before {
      border-color: var(--color-white);
      background-color: var(--color-white);
      box-shadow: inset 0 0 0 5px var(--color-primary);
    }

    /* Results Styles */
    .results-card {
      background: var(--color-white);
      border-radius: var(--radius-lg);
      padding: var(--space-3xl);
      box-shadow: var(--shadow-lg);
      text-align: center;
    }

    .results-emoji {
      font-size: 5rem;
      margin-bottom: var(--space-lg);
    }

    .results-title {
      font-size: var(--font-size-3xl);
      margin-bottom: var(--space-xl);
    }

    .score-display {
      margin-bottom: var(--space-xl);
    }

    .score-circle {
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 4px solid;
      background-color: var(--color-secondary-light);
    }

    .score-number {
      font-size: var(--font-size-3xl);
      font-weight: 700;
      color: var(--color-text);
    }

    .score-max {
      font-size: var(--font-size-sm);
      color: var(--color-text-light);
    }

    .results-description {
      font-size: var(--font-size-lg);
      color: var(--color-text);
      line-height: 1.7;
      margin-bottom: var(--space-2xl);
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .results-tips {
      background-color: var(--color-secondary-light);
      border-radius: var(--radius-md);
      padding: var(--space-xl);
      margin-bottom: var(--space-2xl);
      text-align: left;
    }

    .results-tips h3 {
      color: var(--color-accent);
      margin-bottom: var(--space-md);
    }

    .results-tips ul {
      list-style: none;
      padding: 0;
    }

    .results-tips li {
      padding: var(--space-sm) 0;
      padding-left: var(--space-lg);
      position: relative;
      color: var(--color-text);
      line-height: 1.6;
    }

    .results-tips li::before {
      content: '‚úì';
      position: absolute;
      left: 0;
      color: var(--color-primary);
      font-weight: bold;
    }

    .results-actions {
      display: flex;
      gap: var(--space-md);
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: var(--space-xl);
    }

    .share-section {
      padding-top: var(--space-xl);
      border-top: 1px solid var(--color-secondary);
    }

    .share-section p {
      color: var(--color-text-light);
      margin-bottom: var(--space-md);
      font-size: var(--font-size-sm);
    }

    .share-buttons {
      display: flex;
      justify-content: center;
      gap: var(--space-md);
    }

    .share-btn {
      padding: var(--space-sm) var(--space-lg);
      background-color: var(--color-secondary);
      border: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      font-size: var(--font-size-sm);
      transition: all var(--transition-fast);
    }

    .share-btn:hover {
      background-color: var(--color-secondary-dark);
    }

    @media (max-width: 768px) {
      .quiz-header h1 {
        font-size: var(--font-size-2xl);
      }

      .question-card {
        padding: var(--space-xl);
        border-radius: var(--radius-lg);
      }

      .question-text {
        font-size: var(--font-size-xl);
        margin-bottom: var(--space-xl);
      }

      .option-btn {
        padding: var(--space-md) var(--space-lg);
        font-size: var(--font-size-sm);
      }

      .option-btn::before {
        width: 18px;
        height: 18px;
        min-width: 18px;
      }

      .results-card {
        padding: var(--space-xl);
      }

      .results-emoji {
        font-size: 4rem;
      }

      .results-title {
        font-size: var(--font-size-2xl);
      }
    }
  </style>
</Layout>
